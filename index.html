<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>jQuery Mobile Web App</title>
<link href="jquery.mobile.theme-1.0.min.css" rel="stylesheet" type="text/css"/>
<link href="jquery.mobile.structure-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="jquery.mobile-1.0.min.js" type="text/javascript"></script>
<script src="cordova.js" type="text/javascript"></script>

<script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
	document.addEventListener("deviceready", onDeviceReady, false);
	
	// PhoneGap is ready
    $(document).ready(function() {
		// get GPS location
		var element = document.getElementById('geolocation');
		element.innerHTML = 'Finding location...';
		
        navigator.geolocation.getCurrentPosition(onSuccess, onError);
		
	});
	
	// onSuccess Geolocation
    function onSuccess(position) {
        var element = document.getElementById('geolocation');
		//rev_geocode("38.002578", "-84.539437"); //Lexington coords (for debugging)
		rev_geocode(position.coords.latitude,position.coords.longitude);
		localStorage.setItem("lat",position.coords.latitude);
		localStorage.setItem("lng",position.coords.longitude);
		
		$('#coords').html(localStorage.getItem("lat") + ", " + localStorage.getItem("lng"));
		
		alert(localStorage.getItem("lat") + ", " + localStorage.getItem("lng"));
		
        /*element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                            'Longitude: '          + position.coords.longitude             + '<br />' +
                            'Altitude: '           + position.coords.altitude              + '<br />' +
                            'Accuracy: '           + position.coords.accuracy              + '<br />' +
                            'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                            'Heading: '            + position.coords.heading               + '<br />' +
                            'Speed: '              + position.coords.speed                 + '<br />' +
                            'Timestamp: '          + new Date(position.timestamp)          + '<br />';*/
    }

    // onError Callback receives a PositionError object
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }
</script>

</head> 
<body> 

<div data-role="page" id="page" data-theme="a">
	<div data-role="header">
		<h1>Yard Sale</h1>
	</div>
	<div data-role="content">	

	Map<br />
    <span id="coords"></span>

	<div data-role="footer">
		<button>Show Me Sales</button>
        <button>Post My Sale</button>
	</div>
</div>

</body>
</html>